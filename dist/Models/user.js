'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _bcrypt=require('bcrypt'),_bcrypt2=_interopRequireDefault(_bcrypt);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default=(a,b)=>{const c=a.define('users',{username:{type:b.STRING,unique:!0,validate:{isAlphanumeric:{args:!0,msg:'The username can only contain letters and numbers'},len:{args:[3,25],msg:'The username needs to be between 3 and 25 characters long'}}},email:{type:b.STRING,unique:!0,validate:{isEmail:{args:!0,msg:'Invalid email'}}},password:{type:b.STRING,validate:{len:{args:[5,100],msg:'Password needs to be between 5 and 100 characters long'}}}},{hooks:{afterValidate:async a=>{a.password=await _bcrypt2.default.hash(a.password,12)}}});return c.associate=a=>{c.belongsToMany(a.Team,{through:a.Member,foreignKey:{name:'userId',field:'user_id'}}),c.belongsToMany(a.Channel,{through:'channel_member',foreignKey:{name:'userId',field:'user_id'}}),c.belongsToMany(a.Channel,{through:a.PCMember,foreignKey:{name:'userId',field:'user_id'}})},c};