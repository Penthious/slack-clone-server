'use strict';Object.defineProperty(exports,'__esModule',{value:!0});const createResolver=a=>{const b=a;return b.createResolver=b=>{return createResolver(async(c,d,e,f)=>(await a(c,d,e,f),b(c,d,e,f)))},b},requiresAuth=exports.requiresAuth=createResolver((a,b,c)=>{if(!c.user||!c.user.id)throw new Error('Not authenticated')}),requiresTeamAccess=exports.requiresTeamAccess=requiresAuth.createResolver(async(a,{channelId:b},{user:c,models:d})=>{const e=await d.Channel.findOne({where:{id:b}}),f=await d.Member.findOne({where:{teamId:e.teamId,userId:c.id}});if(!f)throw new Error('You have to be a member of the team to subscribe to it\'s messages')}),directMessageSubscription=exports.directMessageSubscription=requiresAuth.createResolver(async(a,{teamId:b,userId:c},{user:d,models:e})=>{const f=await e.Member.findAll({where:{teamId:b,[e.sequelize.Op.or]:[{userId:c},{userId:d.id}]}});if(2!==f.length)throw new Error('Something went wrong: directMessageSubscription')});